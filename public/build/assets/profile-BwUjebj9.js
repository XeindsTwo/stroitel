import{o as c,c as m,h as i}from"./modal-functions-BMefCUWO.js";const n=document.querySelector(".profile__edit"),l=document.getElementById("modal_profile"),s=document.getElementById("close_edit");n.addEventListener("click",()=>{c(l);const r=n.getAttribute("data-name"),t=n.getAttribute("data-email");document.getElementById("name").value=r,document.getElementById("email").value=t});s.addEventListener("click",()=>{m(l)});i(l);const d=document.getElementById("edit_profile-form");d.addEventListener("submit",async r=>{r.preventDefault();const t=new FormData(d);try{const a=await fetch("/profile/update",{method:"POST",body:t});if(a.ok){m(l);const e=t.get("name"),o=t.get("email");document.querySelector('[data-field="name"]').textContent=e,document.querySelector('[data-field="email"]').textContent=o,document.querySelector(".title").textContent=`Здравствуйте, ${e}`,n.setAttribute("data-name",e),n.setAttribute("data-email",o)}else{const e=await a.json();if(e.error&&e.error.email){const o=document.getElementById("email_error");o.style.display="block",setTimeout(()=>{o.style.display="none"},2e3)}console.error("Ошибка при обновлении профиля")}}catch(a){console.error("Ошибка при обновлении профиля:",a)}});

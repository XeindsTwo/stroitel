import{o as d,c as s,h as m}from"./modal-functions-BMefCUWO.js";const t=document.getElementById("feedback-modal"),E=document.getElementById("feedback-open"),g=document.getElementById("close-feedback");E.addEventListener("click",()=>{d(t)});g.addEventListener("click",()=>{s(t)});m(t);const c=document.getElementById("file"),p=2*1024*1024,v=[".pdf",".doc",".docx",".xls",".xlsx",".jpg",".jpeg",".png"],r=document.getElementById("max-size-error"),a=document.getElementById("format-error");c.addEventListener("change",()=>{const o=c.files[0];if(o.size>p){r.classList.add("error--active"),setTimeout(()=>{r.classList.remove("error--active")},2e3),c.value="";return}const n=o.name,e=n.substring(n.lastIndexOf(".")).toLowerCase();v.includes(e)||(a.classList.add("error--active"),setTimeout(()=>{a.classList.remove("error--active")},4e3),c.value="")});const l=document.getElementById("feedback-form");l.addEventListener("submit",async o=>{if(o.preventDefault(),r.classList.contains("error--active")||a.classList.contains("error--active"))return;const n=new FormData(l);try{const e=await fetch("/feedback-request",{method:"POST",body:n});if(e.ok){const i=await e.json();console.log(i),s(t),d(document.getElementById("complete-modal")),m(document.getElementById("complete-modal")),t.querySelector("form").reset();const u=document.getElementById("close-complete"),f=document.getElementById("close-complete-btn");u.addEventListener("click",()=>{s(document.getElementById("complete-modal"))}),f.addEventListener("click",()=>{s(document.getElementById("complete-modal"))})}else throw e.status===429?new Error("Вы отправили много заявок за последнее время. Попробуйте позже."):new Error("Ошибка при отправке запроса")}catch(e){console.error(e),alert(e.message)}});
